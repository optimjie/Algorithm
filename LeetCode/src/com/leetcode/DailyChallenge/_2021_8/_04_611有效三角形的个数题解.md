### 三条边构成三角形，有三种情况：
- 三条边均相等：
    只需找到所有边中，个数大于等于$3$的，假设数量为$t$，在答案中只需再加$C_t^3$即可。
- 两条边相等：
    只需找到所有边中，个数大于等于$2$的，假设满足该条件的某一条边的长度为$x$，数量为$t$。这样第三条边的长度只需小于$2x$即可，计算第三条边的个数使用前缀和，时间复杂度为$O(1)$，不过这里还要减掉$t$，否则与情况一相同了。在答案中加上$C_t^2 * sum$即可，$sum$为第三条边的个数。
- 三条边均不等：
    在遍历三条边时，人为规定三条边从小到大排序以防止重复，当然这里第三边的计算还是使用前缀和。遍历前两条边，假设长度分别是$x$和$y$，其中$x<y$，则第三条边的长度范围为$(y, x + y)$，在答案中加上$x * y * sum$即可，$sum$为第三条边的个数。
```Java
class Solution {
    public int triangleNumber(int[] nums) {
        int ans = 0;
        int[][] a = new int[1010][2];
        int[] s = new int[1010];
        for (int i = 1; i < 1010; i++) a[i][0] = i;
        for (int v : nums) if (v != 0) a[v][1]++;
        // 初始化前缀和
        for (int i = 1; i < 1010; i++) s[i] = s[i - 1] + a[i][1];
        // 计算三条边均相等的个数
        for (int i = 1; i < 1010; i++) {
            int t = a[i][1];
            if (t >= 3) ans += (t * (t - 1) * (t - 2)) / 6;
        }
        // 计算两条边相等的个数
        for (int i = 1; i < 1010; i++) {
            int t = a[i][1];
            if (t < 2) continue;
            ans += t * (t - 1) / 2 * (s[Math.min(1005, 2 * i - 1)] - t);
        }
        // 计算三条边均不等的个数
        for (int i = 1; i < 1010; i++) {
            if (a[i][1] == 0) continue;
            for (int j = i + 1; j < 1010; j++) {
                if (a[j][1] == 0) continue;
                ans += a[i][1] * a[j][1] * (s[Math.min(1005, i + j - 1)] - s[j]);
            }
        }
        return ans;
    }
}
```